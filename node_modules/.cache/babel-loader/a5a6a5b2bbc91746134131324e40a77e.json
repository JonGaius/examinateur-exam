{"ast":null,"code":"import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\nconst login = async data => {\n  const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data);\n  if (response.data) {\n    let obj = {\n      user_slug: response.data.user_slug\n    };\n    console.log(response.data);\n    const response1 = await axios.post(APIURL + \"examinateurs/get_info_examinateur/\", obj);\n    if (response1.data) {\n      console.log(response1.data);\n      // setCookie(\"auth-dgttm\",response.data.token, 10)\n      // let stk = {\n      //     change_password: response.data.change_password,\n      //     user_slug: response.data.user_slug,\n      // }\n      // localStorage.setItem('auth-dgttm-user', JSON.stringify(stk))\n      // localStorage.setItem('auth-dgttm-examinateur', JSON.stringify(response1.data))\n    }\n\n    return;\n  }\n};\nconst me = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n\n  const response = await axios.get(APIURL + `authentifications/users/${data}/`);\n  return response.data;\n};\nconst updateInfos = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    nom: data.nom,\n    prenom: data.prenom,\n    service: data.service,\n    telephone: data.telephone,\n    numero_matricule: data.numero_matricule,\n    email: data.email\n  };\n  const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj);\n  return response.data;\n};\nconst updatePassword = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    old_password: data.old_password,\n    new_password: data.new_password,\n    confirm_new_password: data.confirm_new_password\n  };\n  const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`, obj);\n  return response.data;\n};\nconst logout = async () => {\n  removeToken(\"auth-dgttm\");\n  localStorage.removeItem('auth-dgttm-user');\n};\nconst authService = {\n  login,\n  me,\n  logout,\n  updateInfos,\n  updatePassword\n};\nexport default authService;","map":{"version":3,"names":["axios","APIURL","removeToken","setCookie","login","data","response","post","obj","user_slug","console","log","response1","me","token","get","updateInfos","nom","prenom","service","telephone","numero_matricule","email","patch","slug","updatePassword","old_password","new_password","confirm_new_password","logout","localStorage","removeItem","authService"],"sources":["/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/features/auth/authService.js"],"sourcesContent":["import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\n\nconst login = async (data) => {\n    const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data)\n   \n    if (response.data) {\n        let obj = {\n            user_slug: response.data.user_slug\n        }\n        console.log(response.data)\n        const response1 = await axios.post(APIURL + \"examinateurs/get_info_examinateur/\", obj)\n        if(response1.data){\n            console.log(response1.data)\n            // setCookie(\"auth-dgttm\",response.data.token, 10)\n            // let stk = {\n            //     change_password: response.data.change_password,\n            //     user_slug: response.data.user_slug,\n            // }\n            // localStorage.setItem('auth-dgttm-user', JSON.stringify(stk))\n            // localStorage.setItem('auth-dgttm-examinateur', JSON.stringify(response1.data))\n        }\n\n        return \n    }\n}\n\nconst me = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    \n    const response = await axios.get(APIURL + `authentifications/users/${data}/`)\n    \n    return response.data\n}\n\nconst updateInfos = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        nom: data.nom,\n        prenom: data.prenom,\n        service: data.service,\n        telephone: data.telephone,\n        numero_matricule: data.numero_matricule,\n        email: data.email,\n    }\n    const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj)\n    \n    return response.data\n}\n\nconst updatePassword = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        old_password: data.old_password,\n        new_password: data.new_password,\n        confirm_new_password: data.confirm_new_password\n    }\n    const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`,obj)\n    return response.data\n}\n\nconst logout = async () => {\n    removeToken(\"auth-dgttm\")\n    localStorage.removeItem('auth-dgttm-user')\n}\n\nconst authService = {\n    login,\n    me,\n    logout,\n    updateInfos,\n    updatePassword\n}\n\nexport default authService"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,sBAAsB;AAC7C,SAASC,WAAW,EAAEC,SAAS,QAAQ,4BAA4B;AAEnE,MAAMC,KAAK,GAAG,MAAOC,IAAI,IAAK;EAC1B,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACN,MAAM,GAAG,uCAAuC,EAAEI,IAAI,CAAC;EAEzF,IAAIC,QAAQ,CAACD,IAAI,EAAE;IACf,IAAIG,GAAG,GAAG;MACNC,SAAS,EAAEH,QAAQ,CAACD,IAAI,CAACI;IAC7B,CAAC;IACDC,OAAO,CAACC,GAAG,CAACL,QAAQ,CAACD,IAAI,CAAC;IAC1B,MAAMO,SAAS,GAAG,MAAMZ,KAAK,CAACO,IAAI,CAACN,MAAM,GAAG,oCAAoC,EAAEO,GAAG,CAAC;IACtF,IAAGI,SAAS,CAACP,IAAI,EAAC;MACdK,OAAO,CAACC,GAAG,CAACC,SAAS,CAACP,IAAI,CAAC;MAC3B;MACA;MACA;MACA;MACA;MACA;MACA;IACJ;;IAEA;EACJ;AACJ,CAAC;AAED,MAAMQ,EAAE,GAAG,OAAOR,IAAI,EAAES,KAAK,KAAK;EAC9B;EACA;EACA;EACA;EACA;;EAEA,MAAMR,QAAQ,GAAG,MAAMN,KAAK,CAACe,GAAG,CAACd,MAAM,GAAI,2BAA0BI,IAAK,GAAE,CAAC;EAE7E,OAAOC,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMW,WAAW,GAAG,OAAOX,IAAI,EAAES,KAAK,KAAK;EACvC;EACA;EACA;EACA;EACA;EACA,IAAIN,GAAG,GAAG;IACNS,GAAG,EAAEZ,IAAI,CAACY,GAAG;IACbC,MAAM,EAAEb,IAAI,CAACa,MAAM;IACnBC,OAAO,EAAEd,IAAI,CAACc,OAAO;IACrBC,SAAS,EAAEf,IAAI,CAACe,SAAS;IACzBC,gBAAgB,EAAEhB,IAAI,CAACgB,gBAAgB;IACvCC,KAAK,EAAEjB,IAAI,CAACiB;EAChB,CAAC;EACD,MAAMhB,QAAQ,GAAG,MAAMN,KAAK,CAACuB,KAAK,CAACtB,MAAM,GAAI,2BAA0BI,IAAI,CAACmB,IAAK,GAAE,EAAEhB,GAAG,CAAC;EAEzF,OAAOF,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMoB,cAAc,GAAG,OAAOpB,IAAI,EAAES,KAAK,KAAK;EAC1C;EACA;EACA;EACA;EACA;EACA,IAAIN,GAAG,GAAG;IACNkB,YAAY,EAAErB,IAAI,CAACqB,YAAY;IAC/BC,YAAY,EAAEtB,IAAI,CAACsB,YAAY;IAC/BC,oBAAoB,EAAEvB,IAAI,CAACuB;EAC/B,CAAC;EACD,MAAMtB,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACN,MAAM,GAAI,2BAA0BI,IAAI,CAACmB,IAAK,wBAAuB,EAAChB,GAAG,CAAC;EAC5G,OAAOF,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMwB,MAAM,GAAG,YAAY;EACvB3B,WAAW,CAAC,YAAY,CAAC;EACzB4B,YAAY,CAACC,UAAU,CAAC,iBAAiB,CAAC;AAC9C,CAAC;AAED,MAAMC,WAAW,GAAG;EAChB5B,KAAK;EACLS,EAAE;EACFgB,MAAM;EACNb,WAAW;EACXS;AACJ,CAAC;AAED,eAAeO,WAAW"},"metadata":{},"sourceType":"module"}