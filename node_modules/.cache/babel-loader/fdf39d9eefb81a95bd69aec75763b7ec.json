{"ast":null,"code":"import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\nconst login = async data => {\n  const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data);\n  if (response.data) {\n    setCookie(\"auth-dgttm\", response.data.token, 10);\n    let stk = {\n      change_password: response.data.change_password,\n      user_slug: response.data.user_slug\n    };\n    localStorage.setItem('auth-dgttm-user', JSON.stringify(stk));\n    return;\n  }\n};\nconst me = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n\n  const response = await axios.get(APIURL + `authentifications/users/${data}/`);\n  return response.data;\n};\nconst updateInfos = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    nom: data.nom,\n    prenom: data.prenom,\n    service: data.service,\n    telephone: data.telephone,\n    numero_matricule: data.numero_matricule,\n    email: data.email\n  };\n  const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj);\n  return response.data;\n};\nconst updatePassword = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    old_password: data.old_password,\n    new_password: data.new_password,\n    confirm_new_password: data.confirm_new_password\n  };\n  const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`, obj);\n  return response.data;\n};\nconst logout = async () => {\n  removeToken(\"auth-dgttm\");\n  localStorage.removeItem('auth-dgttm-user');\n};\nconst authService = {\n  login,\n  me,\n  logout,\n  updateInfos,\n  updatePassword\n};\nexport default authService;","map":{"version":3,"names":["axios","APIURL","removeToken","setCookie","login","data","response","post","token","stk","change_password","user_slug","localStorage","setItem","JSON","stringify","me","get","updateInfos","obj","nom","prenom","service","telephone","numero_matricule","email","patch","slug","updatePassword","old_password","new_password","confirm_new_password","logout","removeItem","authService"],"sources":["/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/features/auth/authService.js"],"sourcesContent":["import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\n\nconst login = async (data) => {\n    const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data)\n   \n\n    if (response.data) {\n        setCookie(\"auth-dgttm\",response.data.token, 10)\n        let stk = {\n            change_password: response.data.change_password,\n            user_slug: response.data.user_slug,\n        }\n        localStorage.setItem('auth-dgttm-user', JSON.stringify(stk))\n        return \n    }\n}\n\nconst me = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    \n    const response = await axios.get(APIURL + `authentifications/users/${data}/`)\n    \n    return response.data\n}\n\nconst updateInfos = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        nom: data.nom,\n        prenom: data.prenom,\n        service: data.service,\n        telephone: data.telephone,\n        numero_matricule: data.numero_matricule,\n        email: data.email,\n    }\n    const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj)\n    \n    return response.data\n}\n\nconst updatePassword = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        old_password: data.old_password,\n        new_password: data.new_password,\n        confirm_new_password: data.confirm_new_password\n    }\n    const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`,obj)\n    return response.data\n}\n\nconst logout = async () => {\n    removeToken(\"auth-dgttm\")\n    localStorage.removeItem('auth-dgttm-user')\n}\n\nconst authService = {\n    login,\n    me,\n    logout,\n    updateInfos,\n    updatePassword\n}\n\nexport default authService"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,sBAAsB;AAC7C,SAASC,WAAW,EAAEC,SAAS,QAAQ,4BAA4B;AAEnE,MAAMC,KAAK,GAAG,MAAOC,IAAI,IAAK;EAC1B,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACN,MAAM,GAAG,uCAAuC,EAAEI,IAAI,CAAC;EAGzF,IAAIC,QAAQ,CAACD,IAAI,EAAE;IACfF,SAAS,CAAC,YAAY,EAACG,QAAQ,CAACD,IAAI,CAACG,KAAK,EAAE,EAAE,CAAC;IAC/C,IAAIC,GAAG,GAAG;MACNC,eAAe,EAAEJ,QAAQ,CAACD,IAAI,CAACK,eAAe;MAC9CC,SAAS,EAAEL,QAAQ,CAACD,IAAI,CAACM;IAC7B,CAAC;IACDC,YAAY,CAACC,OAAO,CAAC,iBAAiB,EAAEC,IAAI,CAACC,SAAS,CAACN,GAAG,CAAC,CAAC;IAC5D;EACJ;AACJ,CAAC;AAED,MAAMO,EAAE,GAAG,OAAOX,IAAI,EAAEG,KAAK,KAAK;EAC9B;EACA;EACA;EACA;EACA;;EAEA,MAAMF,QAAQ,GAAG,MAAMN,KAAK,CAACiB,GAAG,CAAChB,MAAM,GAAI,2BAA0BI,IAAK,GAAE,CAAC;EAE7E,OAAOC,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMa,WAAW,GAAG,OAAOb,IAAI,EAAEG,KAAK,KAAK;EACvC;EACA;EACA;EACA;EACA;EACA,IAAIW,GAAG,GAAG;IACNC,GAAG,EAAEf,IAAI,CAACe,GAAG;IACbC,MAAM,EAAEhB,IAAI,CAACgB,MAAM;IACnBC,OAAO,EAAEjB,IAAI,CAACiB,OAAO;IACrBC,SAAS,EAAElB,IAAI,CAACkB,SAAS;IACzBC,gBAAgB,EAAEnB,IAAI,CAACmB,gBAAgB;IACvCC,KAAK,EAAEpB,IAAI,CAACoB;EAChB,CAAC;EACD,MAAMnB,QAAQ,GAAG,MAAMN,KAAK,CAAC0B,KAAK,CAACzB,MAAM,GAAI,2BAA0BI,IAAI,CAACsB,IAAK,GAAE,EAAER,GAAG,CAAC;EAEzF,OAAOb,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMuB,cAAc,GAAG,OAAOvB,IAAI,EAAEG,KAAK,KAAK;EAC1C;EACA;EACA;EACA;EACA;EACA,IAAIW,GAAG,GAAG;IACNU,YAAY,EAAExB,IAAI,CAACwB,YAAY;IAC/BC,YAAY,EAAEzB,IAAI,CAACyB,YAAY;IAC/BC,oBAAoB,EAAE1B,IAAI,CAAC0B;EAC/B,CAAC;EACD,MAAMzB,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACN,MAAM,GAAI,2BAA0BI,IAAI,CAACsB,IAAK,wBAAuB,EAACR,GAAG,CAAC;EAC5G,OAAOb,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAM2B,MAAM,GAAG,YAAY;EACvB9B,WAAW,CAAC,YAAY,CAAC;EACzBU,YAAY,CAACqB,UAAU,CAAC,iBAAiB,CAAC;AAC9C,CAAC;AAED,MAAMC,WAAW,GAAG;EAChB9B,KAAK;EACLY,EAAE;EACFgB,MAAM;EACNd,WAAW;EACXU;AACJ,CAAC;AAED,eAAeM,WAAW"},"metadata":{},"sourceType":"module"}