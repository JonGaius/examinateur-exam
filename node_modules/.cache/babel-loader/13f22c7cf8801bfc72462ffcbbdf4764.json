{"ast":null,"code":"var _jsxFileName = \"/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/views/components/card/Timer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { CircularProgressbar, buildStyles } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\";\nimport audio from \"../../../assets/audio/sonnerie-reveil.mp3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst music = new Audio(audio);\nconst Timer = _ref => {\n  _s();\n  let {\n    fnc,\n    socket,\n    time = 30 * 60,\n    examen\n  } = _ref;\n  const green = \"#EF233C\";\n  const [secondLeft, setSecondLeft] = useState(0);\n  const secondLeftRef = useRef(secondLeft);\n  const settingsInfo = {\n    workMinutes: 2\n  };\n  useEffect(() => {\n    secondLeftRef.current = time;\n    setSecondLeft(secondLeftRef.current);\n    const timer = setInterval(() => {\n      if (secondLeftRef.current === 0) {\n        //    navigate(\"/examens/fin\")\n        music.play();\n        music.loop = true;\n        fnc(true);\n        // console.log(\"finished\")\n\n        let data = {\n          room: examen,\n          statut: true\n        };\n        socket.emit(\"finish_composition\", data);\n        localStorage.setItem('finish-exam', JSON.stringify(true));\n      }\n      if (secondLeftRef.current > 0) {\n        secondLeftRef.current = secondLeftRef.current - 1;\n        setSecondLeft(secondLeftRef.current);\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [fnc, socket, time, examen]);\n  return /*#__PURE__*/_jsxDEV(CircularProgressbar, {\n    value: secondLeft / (60 * settingsInfo.workMinutes) * 100,\n    text: `${Math.floor(secondLeft / 60)} : ${secondLeft % 60 < 10 ? \"0\" + secondLeft % 60 : secondLeft % 60}`,\n    styles: buildStyles({\n      pathColor: green,\n      textColor: green,\n      textSize: 19\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n};\n_s(Timer, \"9j5Tvwf8OdUNjpmGam0tLQKUDQg=\");\n_c = Timer;\nexport default Timer;\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","CircularProgressbar","buildStyles","audio","music","Audio","Timer","fnc","socket","time","examen","green","secondLeft","setSecondLeft","secondLeftRef","settingsInfo","workMinutes","current","timer","setInterval","play","loop","data","room","statut","emit","localStorage","setItem","JSON","stringify","clearInterval","Math","floor","pathColor","textColor","textSize"],"sources":["/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/views/components/card/Timer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {CircularProgressbar, buildStyles} from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\"\nimport audio from \"../../../assets/audio/sonnerie-reveil.mp3\"\n\nconst music = new Audio(audio);\n\nconst Timer = ({fnc, socket, time = 30 * 60, examen}) => {\n    const green = \"#EF233C\"\n    const [secondLeft, setSecondLeft] = useState(0)\n    const secondLeftRef = useRef(secondLeft)\n    const settingsInfo = {\n        workMinutes: 2\n    }\n    \n    \n    useEffect(() => {\n        secondLeftRef.current = time\n        setSecondLeft(secondLeftRef.current)\n        const timer = setInterval(() => {\n            if(secondLeftRef.current === 0){\n            //    navigate(\"/examens/fin\")\n                music.play();\n                music.loop =true;\n                fnc(true)\n                // console.log(\"finished\")\n\n                let data = {\n                    room: examen,\n                    statut: true,\n                }\n                socket.emit(\"finish_composition\", data)\n                localStorage.setItem('finish-exam', JSON.stringify(true))\n            }\n            if(secondLeftRef.current > 0){\n                secondLeftRef.current = secondLeftRef.current - 1;\n                setSecondLeft(secondLeftRef.current)\n            }\n        }, 1000)\n        return () => clearInterval(timer)\n\n    },[fnc,socket,time,examen])\n    return (\n        <CircularProgressbar value={secondLeft / (60 * settingsInfo.workMinutes) * 100} text={`${Math.floor(secondLeft / 60)} : ${(secondLeft % 60) < 10 ? \"0\"+secondLeft % 60 : secondLeft % 60}`} styles={buildStyles({\n            pathColor: green,\n            textColor: green,\n            textSize: 19\n        })} />\n    );\n};\n\nexport default Timer;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAAQC,mBAAmB,EAAEC,WAAW,QAAO,4BAA4B;AAC3E,OAAO,4CAA4C;AACnD,OAAOC,KAAK,MAAM,2CAA2C;AAAA;AAE7D,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACF,KAAK,CAAC;AAE9B,MAAMG,KAAK,GAAG,QAA2C;EAAA;EAAA,IAA1C;IAACC,GAAG;IAAEC,MAAM;IAAEC,IAAI,GAAG,EAAE,GAAG,EAAE;IAAEC;EAAM,CAAC;EAChD,MAAMC,KAAK,GAAG,SAAS;EACvB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAMc,aAAa,GAAGf,MAAM,CAACa,UAAU,CAAC;EACxC,MAAMG,YAAY,GAAG;IACjBC,WAAW,EAAE;EACjB,CAAC;EAGDlB,SAAS,CAAC,MAAM;IACZgB,aAAa,CAACG,OAAO,GAAGR,IAAI;IAC5BI,aAAa,CAACC,aAAa,CAACG,OAAO,CAAC;IACpC,MAAMC,KAAK,GAAGC,WAAW,CAAC,MAAM;MAC5B,IAAGL,aAAa,CAACG,OAAO,KAAK,CAAC,EAAC;QAC/B;QACIb,KAAK,CAACgB,IAAI,EAAE;QACZhB,KAAK,CAACiB,IAAI,GAAE,IAAI;QAChBd,GAAG,CAAC,IAAI,CAAC;QACT;;QAEA,IAAIe,IAAI,GAAG;UACPC,IAAI,EAAEb,MAAM;UACZc,MAAM,EAAE;QACZ,CAAC;QACDhB,MAAM,CAACiB,IAAI,CAAC,oBAAoB,EAAEH,IAAI,CAAC;QACvCI,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;MAC7D;MACA,IAAGf,aAAa,CAACG,OAAO,GAAG,CAAC,EAAC;QACzBH,aAAa,CAACG,OAAO,GAAGH,aAAa,CAACG,OAAO,GAAG,CAAC;QACjDJ,aAAa,CAACC,aAAa,CAACG,OAAO,CAAC;MACxC;IACJ,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAMa,aAAa,CAACZ,KAAK,CAAC;EAErC,CAAC,EAAC,CAACX,GAAG,EAACC,MAAM,EAACC,IAAI,EAACC,MAAM,CAAC,CAAC;EAC3B,oBACI,QAAC,mBAAmB;IAAC,KAAK,EAAEE,UAAU,IAAI,EAAE,GAAGG,YAAY,CAACC,WAAW,CAAC,GAAG,GAAI;IAAC,IAAI,EAAG,GAAEe,IAAI,CAACC,KAAK,CAACpB,UAAU,GAAG,EAAE,CAAE,MAAMA,UAAU,GAAG,EAAE,GAAI,EAAE,GAAG,GAAG,GAACA,UAAU,GAAG,EAAE,GAAGA,UAAU,GAAG,EAAG,EAAE;IAAC,MAAM,EAAEV,WAAW,CAAC;MAC5M+B,SAAS,EAAEtB,KAAK;MAChBuB,SAAS,EAAEvB,KAAK;MAChBwB,QAAQ,EAAE;IACd,CAAC;EAAE;IAAA;IAAA;IAAA;EAAA,QAAG;AAEd,CAAC;AAAC,GA1CI7B,KAAK;AAAA,KAALA,KAAK;AA4CX,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module"}