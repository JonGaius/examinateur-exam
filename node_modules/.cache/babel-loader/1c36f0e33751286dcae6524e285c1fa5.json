{"ast":null,"code":"import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\nconst login = async data => {\n  const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data);\n  if (response.data) {\n    let obj = {\n      user_slug: response.data.user_slug\n    };\n    const response1 = await axios.post(APIURL + \"examinateurs/get_info_examinateur/\", obj);\n    if (response1.data) {\n      console.log(response1.data.examinateur);\n      // setCookie(\"auth-dgttm\",response.data.token, 10)\n      // let stk = {\n      //     change_password: response.data.change_password,\n      //     user_slug: response.data.user_slug,\n      // }\n      // localStorage.setItem('auth-dgttm-user', JSON.stringify(stk))\n      // localStorage.setItem('auth-dgttm-examinateur', JSON.stringify(response1.data))\n    }\n\n    return;\n  }\n};\nconst me = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n\n  const response = await axios.get(APIURL + `authentifications/users/${data}/`);\n  return response.data;\n};\nconst updateInfos = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    nom: data.nom,\n    prenom: data.prenom,\n    service: data.service,\n    telephone: data.telephone,\n    numero_matricule: data.numero_matricule,\n    email: data.email\n  };\n  const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj);\n  return response.data;\n};\nconst updatePassword = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    old_password: data.old_password,\n    new_password: data.new_password,\n    confirm_new_password: data.confirm_new_password\n  };\n  const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`, obj);\n  return response.data;\n};\nconst logout = async () => {\n  removeToken(\"auth-dgttm\");\n  localStorage.removeItem('auth-dgttm-user');\n};\nconst authService = {\n  login,\n  me,\n  logout,\n  updateInfos,\n  updatePassword\n};\nexport default authService;","map":{"version":3,"names":["axios","APIURL","removeToken","setCookie","login","data","response","post","obj","user_slug","response1","console","log","examinateur","me","token","get","updateInfos","nom","prenom","service","telephone","numero_matricule","email","patch","slug","updatePassword","old_password","new_password","confirm_new_password","logout","localStorage","removeItem","authService"],"sources":["/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/features/auth/authService.js"],"sourcesContent":["import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\n\nconst login = async (data) => {\n    const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data)\n   \n    if (response.data) {\n        let obj = {\n            user_slug: response.data.user_slug\n        }\n        const response1 = await axios.post(APIURL + \"examinateurs/get_info_examinateur/\", obj)\n        if(response1.data){\n            console.log(response1.data.examinateur)\n            // setCookie(\"auth-dgttm\",response.data.token, 10)\n            // let stk = {\n            //     change_password: response.data.change_password,\n            //     user_slug: response.data.user_slug,\n            // }\n            // localStorage.setItem('auth-dgttm-user', JSON.stringify(stk))\n            // localStorage.setItem('auth-dgttm-examinateur', JSON.stringify(response1.data))\n        }\n\n        return \n    }\n}\n\nconst me = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    \n    const response = await axios.get(APIURL + `authentifications/users/${data}/`)\n    \n    return response.data\n}\n\nconst updateInfos = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        nom: data.nom,\n        prenom: data.prenom,\n        service: data.service,\n        telephone: data.telephone,\n        numero_matricule: data.numero_matricule,\n        email: data.email,\n    }\n    const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj)\n    \n    return response.data\n}\n\nconst updatePassword = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        old_password: data.old_password,\n        new_password: data.new_password,\n        confirm_new_password: data.confirm_new_password\n    }\n    const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`,obj)\n    return response.data\n}\n\nconst logout = async () => {\n    removeToken(\"auth-dgttm\")\n    localStorage.removeItem('auth-dgttm-user')\n}\n\nconst authService = {\n    login,\n    me,\n    logout,\n    updateInfos,\n    updatePassword\n}\n\nexport default authService"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,MAAM,QAAQ,sBAAsB;AAC7C,SAASC,WAAW,EAAEC,SAAS,QAAQ,4BAA4B;AAEnE,MAAMC,KAAK,GAAG,MAAOC,IAAI,IAAK;EAC1B,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACN,MAAM,GAAG,uCAAuC,EAAEI,IAAI,CAAC;EAEzF,IAAIC,QAAQ,CAACD,IAAI,EAAE;IACf,IAAIG,GAAG,GAAG;MACNC,SAAS,EAAEH,QAAQ,CAACD,IAAI,CAACI;IAC7B,CAAC;IACD,MAAMC,SAAS,GAAG,MAAMV,KAAK,CAACO,IAAI,CAACN,MAAM,GAAG,oCAAoC,EAAEO,GAAG,CAAC;IACtF,IAAGE,SAAS,CAACL,IAAI,EAAC;MACdM,OAAO,CAACC,GAAG,CAACF,SAAS,CAACL,IAAI,CAACQ,WAAW,CAAC;MACvC;MACA;MACA;MACA;MACA;MACA;MACA;IACJ;;IAEA;EACJ;AACJ,CAAC;AAED,MAAMC,EAAE,GAAG,OAAOT,IAAI,EAAEU,KAAK,KAAK;EAC9B;EACA;EACA;EACA;EACA;;EAEA,MAAMT,QAAQ,GAAG,MAAMN,KAAK,CAACgB,GAAG,CAACf,MAAM,GAAI,2BAA0BI,IAAK,GAAE,CAAC;EAE7E,OAAOC,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMY,WAAW,GAAG,OAAOZ,IAAI,EAAEU,KAAK,KAAK;EACvC;EACA;EACA;EACA;EACA;EACA,IAAIP,GAAG,GAAG;IACNU,GAAG,EAAEb,IAAI,CAACa,GAAG;IACbC,MAAM,EAAEd,IAAI,CAACc,MAAM;IACnBC,OAAO,EAAEf,IAAI,CAACe,OAAO;IACrBC,SAAS,EAAEhB,IAAI,CAACgB,SAAS;IACzBC,gBAAgB,EAAEjB,IAAI,CAACiB,gBAAgB;IACvCC,KAAK,EAAElB,IAAI,CAACkB;EAChB,CAAC;EACD,MAAMjB,QAAQ,GAAG,MAAMN,KAAK,CAACwB,KAAK,CAACvB,MAAM,GAAI,2BAA0BI,IAAI,CAACoB,IAAK,GAAE,EAAEjB,GAAG,CAAC;EAEzF,OAAOF,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMqB,cAAc,GAAG,OAAOrB,IAAI,EAAEU,KAAK,KAAK;EAC1C;EACA;EACA;EACA;EACA;EACA,IAAIP,GAAG,GAAG;IACNmB,YAAY,EAAEtB,IAAI,CAACsB,YAAY;IAC/BC,YAAY,EAAEvB,IAAI,CAACuB,YAAY;IAC/BC,oBAAoB,EAAExB,IAAI,CAACwB;EAC/B,CAAC;EACD,MAAMvB,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACN,MAAM,GAAI,2BAA0BI,IAAI,CAACoB,IAAK,wBAAuB,EAACjB,GAAG,CAAC;EAC5G,OAAOF,QAAQ,CAACD,IAAI;AACxB,CAAC;AAED,MAAMyB,MAAM,GAAG,YAAY;EACvB5B,WAAW,CAAC,YAAY,CAAC;EACzB6B,YAAY,CAACC,UAAU,CAAC,iBAAiB,CAAC;AAC9C,CAAC;AAED,MAAMC,WAAW,GAAG;EAChB7B,KAAK;EACLU,EAAE;EACFgB,MAAM;EACNb,WAAW;EACXS;AACJ,CAAC;AAED,eAAeO,WAAW"},"metadata":{},"sourceType":"module"}