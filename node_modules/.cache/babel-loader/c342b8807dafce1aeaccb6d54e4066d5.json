{"ast":null,"code":"var _jsxFileName = \"/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/views/components/card/Timer.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { CircularProgressbar, buildStyles } from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\";\nimport audio from \"../../../assets/audio/sonnerie-reveil.mp3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst music = new Audio(audio);\nconst Timer = _ref => {\n  _s();\n  let {\n    socket,\n    examen\n  } = _ref;\n  const green = \"#EF233C\";\n  const [secondLeft, setSecondLeft] = useState(0);\n  const secondLeftRef = useRef(secondLeft);\n  const settingsInfo = {\n    workMinutes: 45\n  };\n  useEffect(() => {\n    secondLeftRef.current = 45 * 60;\n    setSecondLeft(secondLeftRef.current);\n    const timer = setInterval(() => {\n      if (secondLeftRef.current === 0) {\n        //    navigate(\"/examens/fin\")\n        music.play();\n        music.loop = true;\n        // console.log(\"finished\")\n\n        let data = {\n          room: examen,\n          statut: true\n        };\n        socket.emit(\"finish_composition\", data);\n        localStorage.setItem('finish-exam', JSON.stringify(true));\n      }\n      if (secondLeftRef.current > 0) {\n        secondLeftRef.current = secondLeftRef.current - 1;\n        setSecondLeft(secondLeftRef.current);\n      }\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [socket, examen]);\n  return /*#__PURE__*/_jsxDEV(CircularProgressbar, {\n    value: secondLeft / (60 * settingsInfo.workMinutes) * 100,\n    text: `${Math.floor(secondLeft / 60)} : ${secondLeft % 60 < 10 ? \"0\" + secondLeft % 60 : secondLeft % 60}`,\n    styles: buildStyles({\n      pathColor: green,\n      textColor: green,\n      textSize: 19\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n_s(Timer, \"9j5Tvwf8OdUNjpmGam0tLQKUDQg=\");\n_c = Timer;\nexport default Timer;\nvar _c;\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","CircularProgressbar","buildStyles","audio","music","Audio","Timer","socket","examen","green","secondLeft","setSecondLeft","secondLeftRef","settingsInfo","workMinutes","current","timer","setInterval","play","loop","data","room","statut","emit","localStorage","setItem","JSON","stringify","clearInterval","Math","floor","pathColor","textColor","textSize"],"sources":["/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/views/components/card/Timer.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport {CircularProgressbar, buildStyles} from \"react-circular-progressbar\";\nimport \"react-circular-progressbar/dist/styles.css\"\nimport audio from \"../../../assets/audio/sonnerie-reveil.mp3\"\n\nconst music = new Audio(audio);\n\nconst Timer = ({socket, examen}) => {\n    const green = \"#EF233C\"\n    const [secondLeft, setSecondLeft] = useState(0)\n    const secondLeftRef = useRef(secondLeft)\n    const settingsInfo = {\n        workMinutes: 45\n    }\n    \n    \n    useEffect(() => {\n        secondLeftRef.current = 45 * 60\n        setSecondLeft(secondLeftRef.current)\n        const timer = setInterval(() => {\n            if(secondLeftRef.current === 0){\n            //    navigate(\"/examens/fin\")\n                music.play();\n                music.loop =true;\n                // console.log(\"finished\")\n\n                let data = {\n                    room: examen,\n                    statut: true,\n                }\n                socket.emit(\"finish_composition\", data)\n                localStorage.setItem('finish-exam', JSON.stringify(true))\n            }\n            if(secondLeftRef.current > 0){\n                secondLeftRef.current = secondLeftRef.current - 1;\n                setSecondLeft(secondLeftRef.current)\n            }\n        }, 1000)\n        return () => clearInterval(timer)\n\n    },[socket,examen])\n    return (\n        <CircularProgressbar value={secondLeft / (60 * settingsInfo.workMinutes) * 100} text={`${Math.floor(secondLeft / 60)} : ${(secondLeft % 60) < 10 ? \"0\"+secondLeft % 60 : secondLeft % 60}`} styles={buildStyles({\n            pathColor: green,\n            textColor: green,\n            textSize: 19\n        })} />\n    );\n};\n\nexport default Timer;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAAQC,mBAAmB,EAAEC,WAAW,QAAO,4BAA4B;AAC3E,OAAO,4CAA4C;AACnD,OAAOC,KAAK,MAAM,2CAA2C;AAAA;AAE7D,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAACF,KAAK,CAAC;AAE9B,MAAMG,KAAK,GAAG,QAAsB;EAAA;EAAA,IAArB;IAACC,MAAM;IAAEC;EAAM,CAAC;EAC3B,MAAMC,KAAK,GAAG,SAAS;EACvB,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC;EAC/C,MAAMY,aAAa,GAAGb,MAAM,CAACW,UAAU,CAAC;EACxC,MAAMG,YAAY,GAAG;IACjBC,WAAW,EAAE;EACjB,CAAC;EAGDhB,SAAS,CAAC,MAAM;IACZc,aAAa,CAACG,OAAO,GAAG,EAAE,GAAG,EAAE;IAC/BJ,aAAa,CAACC,aAAa,CAACG,OAAO,CAAC;IACpC,MAAMC,KAAK,GAAGC,WAAW,CAAC,MAAM;MAC5B,IAAGL,aAAa,CAACG,OAAO,KAAK,CAAC,EAAC;QAC/B;QACIX,KAAK,CAACc,IAAI,EAAE;QACZd,KAAK,CAACe,IAAI,GAAE,IAAI;QAChB;;QAEA,IAAIC,IAAI,GAAG;UACPC,IAAI,EAAEb,MAAM;UACZc,MAAM,EAAE;QACZ,CAAC;QACDf,MAAM,CAACgB,IAAI,CAAC,oBAAoB,EAAEH,IAAI,CAAC;QACvCI,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;MAC7D;MACA,IAAGf,aAAa,CAACG,OAAO,GAAG,CAAC,EAAC;QACzBH,aAAa,CAACG,OAAO,GAAGH,aAAa,CAACG,OAAO,GAAG,CAAC;QACjDJ,aAAa,CAACC,aAAa,CAACG,OAAO,CAAC;MACxC;IACJ,CAAC,EAAE,IAAI,CAAC;IACR,OAAO,MAAMa,aAAa,CAACZ,KAAK,CAAC;EAErC,CAAC,EAAC,CAACT,MAAM,EAACC,MAAM,CAAC,CAAC;EAClB,oBACI,QAAC,mBAAmB;IAAC,KAAK,EAAEE,UAAU,IAAI,EAAE,GAAGG,YAAY,CAACC,WAAW,CAAC,GAAG,GAAI;IAAC,IAAI,EAAG,GAAEe,IAAI,CAACC,KAAK,CAACpB,UAAU,GAAG,EAAE,CAAE,MAAMA,UAAU,GAAG,EAAE,GAAI,EAAE,GAAG,GAAG,GAACA,UAAU,GAAG,EAAE,GAAGA,UAAU,GAAG,EAAG,EAAE;IAAC,MAAM,EAAER,WAAW,CAAC;MAC5M6B,SAAS,EAAEtB,KAAK;MAChBuB,SAAS,EAAEvB,KAAK;MAChBwB,QAAQ,EAAE;IACd,CAAC;EAAE;IAAA;IAAA;IAAA;EAAA,QAAG;AAEd,CAAC;AAAC,GAzCI3B,KAAK;AAAA,KAALA,KAAK;AA2CX,eAAeA,KAAK;AAAC;AAAA"},"metadata":{},"sourceType":"module"}