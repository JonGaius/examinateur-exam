{"ast":null,"code":"import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\nconst login = async data => {\n  const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data);\n  if (response.data) {\n    let obj = {\n      user_slug: response.data.user_slug\n    };\n    const response1 = await axios.post(APIURL + \"examinateurs/get_info_examinateur/\", obj);\n    if (response1.data) {\n      setCookie(\"auth-dgttm\", response.data.token, 10);\n      let stk = {\n        change_password: response.data.change_password,\n        user_slug: response.data.user_slug\n      };\n      localStorage.setItem('auth-dgttm-user', JSON.stringify(stk));\n      localStorage.setItem('auth-dgttm-examinateur', JSON.stringify(response1.data.examinateur.id));\n      return;\n    }\n  }\n};\nconst me = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n\n  const response = await axios.get(APIURL + `authentifications/users/${data}/`);\n  return response.data;\n};\nconst updateInfos = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    nom: data.nom,\n    prenom: data.prenom,\n    service: data.service,\n    telephone: data.telephone,\n    numero_matricule: data.numero_matricule,\n    email: data.email\n  };\n  const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj);\n  return response.data;\n};\nconst updatePassword = async (data, token) => {\n  // const config = {\n  //     headers: {\n  //       Authorization: `Bearer ${token}`,\n  //     },\n  // }\n  let obj = {\n    old_password: data.old_password,\n    new_password: data.new_password,\n    confirm_new_password: data.confirm_new_password\n  };\n  const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`, obj);\n  return response.data;\n};\nconst logout = async () => {\n  removeToken(\"auth-dgttm\");\n  localStorage.removeItem('auth-dgttm-user');\n  localStorage.removeItem('auth-dgttm-examinateur');\n};\nconst authService = {\n  login,\n  me,\n  logout,\n  updateInfos,\n  updatePassword\n};\nexport default authService;","map":{"version":3,"names":["axios","APIURL","removeToken","setCookie","login","data","response","post","obj","user_slug","response1","token","stk","change_password","localStorage","setItem","JSON","stringify","examinateur","id","me","get","updateInfos","nom","prenom","service","telephone","numero_matricule","email","patch","slug","updatePassword","old_password","new_password","confirm_new_password","logout","removeItem","authService"],"sources":["/Users/jonathangaiuskambire/Documents/sigepec/correction/examinateur/src/features/auth/authService.js"],"sourcesContent":["import axios from \"axios\";\nimport { APIURL } from \"../../utils/constant\";\nimport { removeToken, setCookie } from \"../../utils/sharedFunction\";\n\nconst login = async (data) => {\n    const response = await axios.post(APIURL + \"authentifications/token/token_obtain/\", data)\n   \n    if (response.data) {\n        let obj = {\n            user_slug: response.data.user_slug\n        }\n        const response1 = await axios.post(APIURL + \"examinateurs/get_info_examinateur/\", obj)\n        if(response1.data){\n          \n            setCookie(\"auth-dgttm\",response.data.token, 10)\n            let stk = {\n                change_password: response.data.change_password,\n                user_slug: response.data.user_slug,\n            }\n            localStorage.setItem('auth-dgttm-user', JSON.stringify(stk))\n            localStorage.setItem('auth-dgttm-examinateur', JSON.stringify(response1.data.examinateur.id))\n\n            return \n        }\n    }\n}\n\nconst me = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    \n    const response = await axios.get(APIURL + `authentifications/users/${data}/`)\n    \n    return response.data\n}\n\nconst updateInfos = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        nom: data.nom,\n        prenom: data.prenom,\n        service: data.service,\n        telephone: data.telephone,\n        numero_matricule: data.numero_matricule,\n        email: data.email,\n    }\n    const response = await axios.patch(APIURL + `authentifications/users/${data.slug}/`, obj)\n    \n    return response.data\n}\n\nconst updatePassword = async (data, token) => {\n    // const config = {\n    //     headers: {\n    //       Authorization: `Bearer ${token}`,\n    //     },\n    // }\n    let obj = {\n        old_password: data.old_password,\n        new_password: data.new_password,\n        confirm_new_password: data.confirm_new_password\n    }\n    const response = await axios.post(APIURL + `authentifications/users/${data.slug}/user_change_password/`,obj)\n    return response.data\n}\n\nconst logout = async () => {\n    removeToken(\"auth-dgttm\")\n    localStorage.removeItem('auth-dgttm-user')\n    localStorage.removeItem('auth-dgttm-examinateur')\n}\n\nconst authService = {\n    login,\n    me,\n    logout,\n    updateInfos,\n    updatePassword\n}\n\nexport default authService"],"mappings":"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"},"metadata":{},"sourceType":"module"}